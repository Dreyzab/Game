# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: Detective Mode

–≠—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ **–î–µ—Ç–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞** (Detective Mode).
–†–µ–∂–∏–º —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–µ –∏–∑–æ–ª—è—Ü–∏–∏: –º–µ—Ö–∞–Ω–∏–∫–∏ (Core) –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Packs).

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. Core vs Pack
- **Core (–Ø–¥—Ä–æ)**: –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–∂–∏–º–∞. –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å, –î–æ—Å—å–µ (Dossier), –∫–∞—Ä—Ç–∞ —É–ª–∏–∫, –ø–∞—Ä—Å–∏–Ω–≥ QR-–∫–æ–¥–æ–≤ (Hardlinks).
- **Pack (–ö–æ–Ω—Ç–µ–Ω—Ç)**: –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞/–¥–µ–ª–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, `Freiburg 1905` –∏–ª–∏ `Karlsruhe 1900`.
    - –ö–æ–Ω—Ñ–∏–≥ —Ä–µ–≥–∏–æ–Ω–∞ (–∫–∞—Ä—Ç–∞, —Ä–∞–π–æ–Ω—ã).
    - Hardlinks (QR-–∫–æ–¥—ã –∏ –¥–µ–π—Å—Ç–≤–∏—è).
    - VN-—Å—Ü–µ–Ω–∞—Ä–∏–∏ (–¥–∏–∞–ª–æ–≥–∏).
    - –ê—Å—Å–µ—Ç—ã (—Ñ–æ–Ω—ã, —Ç–µ–∫—Å—Ç—É—Ä—ã).

### 2. –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1.  **Map Layer**: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ª–æ–π –∫–∞—Ä—Ç—ã —Å –≤–∏–Ω—Ç–∞–∂–Ω—ã–º —Å—Ç–∏–ª–µ–º –∏ –ª–æ–≥–∏–∫–æ–π –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è.
2.  **Hardlink Service**: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞ QR-–∫–æ–¥–æ–≤ –≤ –∏–≥—Ä–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.
3.  **Dossier Store**: –õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (—É–ª–∏–∫–∏, —Ñ–∞–∫—Ç—ã, –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ç–æ—á–∫–∏).

---

## üõ†Ô∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. –ö–∞—Ä—Ç–∞ (Traffic & Visuals)
–í–∫–ª—é—á–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ `gameMode === 'detective'`.

**–§–∞–π–ª—ã:**
*   `src/widgets/map/map-view/DetectiveModeLayer.tsx`: –û—Å–Ω–æ–≤–Ω–æ–π —Å–ª–æ–π. –†–∏—Å—É–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã –∏ —Ä–∞–π–æ–Ω—ã.
*   `src/widgets/map/map-view/MapView.tsx`: –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º —Å—Ç–∏–ª–µ–π (Sepia/Vintage).
*   `src/features/detective/lib/movement.ts`: –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ (Walking API + –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è).

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
*   **–°—Ç–∏–ª—å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç–∏–ª—å Mapbox + –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:
    *   **Overlay (–¢–µ–∫—Å—Ç—É—Ä–∞ –±—É–º–∞–≥–∏)**: 
        ```tsx
        // –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ src/widgets/map/map-view/MapView.tsx
        <div className="absolute inset-0 pointer-events-none z-50 mix-blend-multiply opacity-15 bg-[#d4c5a3]"
             style={{ backgroundImage: 'url("/images/paper-texture.png")', backgroundSize: '200px' }} />
        ```
    *   **CSS –§–∏–ª—å—Ç—Ä—ã (–¶–≤–µ—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—è)**:
        ```tsx
        // –û–±–µ—Ä—Ç–∫–∞ –∫–∞—Ä—Ç—ã –≤ MapView.tsx
        cn('absolute inset-0', isVintage && 'sepia-[.3] contrast-[1.05] brightness-95 saturate-[.9]')
        ```
*   **–ú–∞—Ä–∫–µ—Ä—ã**: –í–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `DetectiveMarker` (—Ñ–∏—à–∫–∞ –∏–≥—Ä–æ–∫–∞) –∏ `DetectivePointMarker` (—É–ª–∏–∫–∏).
*   **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –ö–ª–∏–∫ —Å—Ç—Ä–æ–∏—Ç –ø–µ—à–µ—Ö–æ–¥–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç. –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Ä–∏—Å—É–µ—Ç—Å—è –ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è (fallback).

### 2. Hardlinks (QR System)
Hardlink ‚Äî —ç—Ç–æ QR-–∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É —Å–æ–±—ã—Ç–∏–π.
–§–æ—Ä–º–∞—Ç: `gw3:hardlink:{packId}:{hardlinkId}`

**–§–∞–π–ª—ã:**
*   `src/features/detective/hardlinks.ts`: –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è ID -> Actions.
*   `src/pages/QRScannerPage.tsx`: –≠–º—É–ª—è—Ç–æ—Ä —Å–∫–∞–Ω–µ—Ä–∞ (–≤ —Ä–µ–∂–∏–º–µ –¥–µ—Ç–µ–∫—Ç–∏–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –≤–º–µ—Å—Ç–æ –∫–∞–º–µ—Ä—ã).

**–¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π (Actions):**
*   `start_vn`: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é –Ω–æ–≤–µ–ª–ª—É.
*   `grant_evidence`: –î–æ–±–∞–≤–∏—Ç—å —É–ª–∏–∫—É –≤ –î–æ—Å—å–µ.
*   `unlock_point`: –û—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤—É—é —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ.
*   `start_battle`: –ù–∞—á–∞—Ç—å —Å–∫—Ä–∏–ø—Ç–æ–≤—ã–π –±–æ–π.

### 3. Dossier (–î–æ—Å—å–µ)
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ `game_progress`.

**–§–∞–π–ª—ã:**
*   `src/features/detective/dossier/store.ts`: Zustand-—Å—Ç–æ—Ä. –•—Ä–∞–Ω–∏—Ç `flags`, `evidence`, `unlockedPoints`.
*   `src/features/detective/dossier/Dossier.tsx`: UI –±–ª–æ–∫–Ω–æ—Ç–∞ (Notebook).

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
```typescript
interface DetectiveState {
  entries: DossierEntry[]; // –î–æ–∫—É–º–µ–Ω—Ç—ã –∏ —Ñ–∞–∫—Ç—ã
  evidence: Evidence[];    // –ù–∞–π–¥–µ–Ω–Ω—ã–µ —É–ª–∏–∫–∏
  pointStates: Record<string, 'locked' | 'discovered' | 'visited'>; // –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ—á–µ–∫ –∫–∞—Ä—Ç—ã
  flags: Record<string, boolean>; // –°—é–∂–µ—Ç–Ω—ã–µ —Ñ–ª–∞–≥–∏
}
```

---

## üì¶ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Content Pack
–ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–≥–∏–æ–Ω–∞ **Karlsruhe**.

### –®–∞–≥ 1: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ–≥–∏–æ–Ω–∞
–í `src/shared/hexmap/regions.ts`:
1.  –î–æ–±–∞–≤—å—Ç–µ `KARLSRUHE_1900` —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —Ü–µ–Ω—Ç—Ä–∞.
2.  –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–∞–π–æ–Ω—ã (`districts`) –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–æ–Ω.

### –®–∞–≥ 2: –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ—á–µ–∫
–í `src/features/detective/points.ts` (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª):
1.  –û–ø–∏—à–∏—Ç–µ POI: –≤–æ–∫–∑–∞–ª, –ø–æ–ª–∏—Ü–µ–π—Å–∫–∏–π —É—á–∞—Å—Ç–æ–∫, –º–µ—Å—Ç–æ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è.
2.  –£–∫–∞–∂–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ `detectiveType` (crime, support, bureau).

### –®–∞–≥ 3: Hardlinks
–í `src/features/detective/hardlinks.ts`:
1.  –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π `packId` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `karlsruhe1900`).
2.  –ü—Ä–æ–ø–∏—à–∏—Ç–µ ID –∫–æ–¥–æ–≤ –∏ –∏—Ö —ç—Ñ—Ñ–µ–∫—Ç—ã.
    ```typescript
    'CASE02_START': [
      { type: 'start_vn', scenarioId: 'karlsruhe_intro' },
      { type: 'unlock_point', pointId: 'karlsruhe_bahnhof' }
    ]
    ```

### –®–∞–≥ 4: –°—Ü–µ–Ω–∞—Ä–∏–∏ (VN)
–í `src/entities/visual-novel/scenarios/detective/`:
1.  –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å—Ü–µ–Ω–∞—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `case2.ts`).
2.  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `detective` –≥–ª–∞–≤—É –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

### –®–∞–≥ 5: –ê—Å—Å–µ—Ç—ã
–í `public/images/`:
1.  –î–æ–±–∞–≤—å—Ç–µ –æ–±–ª–æ–∂–∫—É —Ä–µ–≥–∏–æ–Ω–∞ (`regions/karlsruhe.jpg`).
2.  –î–æ–±–∞–≤—å—Ç–µ —Ñ–æ–Ω—ã –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤.

---

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ –ê—Å—Å–µ—Ç—ã
–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:

*   **–¶–≤–µ—Ç–∞**: –ë–µ–∂–µ–≤—ã–π `#d4c5a3`, –¢–µ–º–Ω—ã–π `#1a1612`, –ê–∫—Ü–µ–Ω—Ç (–∑–æ–ª–æ—Ç–æ) `#FFD700`.
*   **–®—Ä–∏—Ñ—Ç—ã**: Serif –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (–∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –≥–∞–∑–µ—Ç 1905 –≥–æ–¥–∞).
*   **–¢–µ–∫—Å—Ç—É—Ä–∞**: `mix-blend-multiply` —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é 15% –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç—ã.

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–ö–∞—Ä—Ç–∞ ‚Äî —Å–∞–º—ã–π —Ç—è–∂–µ–ª—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–∂–∏–º–∞. –î–ª—è –ø–ª–∞–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏–µ–º—ã:

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (LRU Cache)
–ß—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–ª–∏–∫–µ –∏ —ç–∫–æ–Ω–æ–º–∏—Ç—å –ª–∏–º–∏—Ç—ã Mapbox API, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `SimpleLRU` (—Ä–∞–∑–º–µ—Ä 50).
- –ö–ª—é—á: `lat,lng-lat,lng`.
- –ï—Å–ª–∏ –º–∞—Ä—à—Ä—É—Ç —É–∂–µ —Å—Ç—Ä–æ–∏–ª—Å—è, –æ–Ω –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

### 2. –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–≥—Ä–æ–∫–∞ –≤ Zustand-—Å—Ç–æ—Ä–µ 60 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É (—á—Ç–æ –≤—ã–∑–≤–∞–ª–æ –±—ã –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è), –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **–∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é**:
- –°—Ç–æ—Ä —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ `targetPosition` –∏ `startTime`.
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `DetectiveMarker` —Å–∞–º –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ `requestAnimationFrame`, –∏—Å–ø–æ–ª—å–∑—É—è –±–∏–±–ª–∏–æ—Ç–µ–∫—É `turf.along`.
- –≠—Ç–æ —Ä–∞–∑–≥—Ä—É–∂–∞–µ—Ç React –æ—Ç –ª–∏—à–Ω–∏—Ö —Ü–∏–∫–ª–æ–≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

### 3. –ò–∑–æ–ª—è—Ü–∏—è –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ (Zustand Selectors)
–í `MapView.tsx` –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å—Ç–æ—Ä—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–µ—á–Ω—ã–µ:
```typescript
const gameMode = useInventoryStore((state) => state.gameMode) // –†–µ–Ω–¥–µ—Ä —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞
```
–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞—Ç—Ä–æ–Ω–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏–ª–∏ HP –∏–≥—Ä–æ–∫–∞ **–Ω–µ –≤—ã–∑–æ–≤–µ—Ç** —Ç—è–∂–µ–ª—ã–π –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç—ã.

### 4. –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (Throttling)
- **Multiplayer Heartbeat**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ —á–∞—â–µ, —á–µ–º —Ä–∞–∑ –≤ 5 —Å–µ–∫—É–Ω–¥.
- **BBox API**: –ó–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É –∑–∞ —Ç–æ—á–∫–∞–º–∏ (MapPoints) —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–∞–º–µ—Ä—ã (—á–µ—Ä–µ–∑ —Ä–µ—Ñ—ã `lastBboxRef`).

### 5. Fallback-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è
–ï—Å–ª–∏ Mapbox Directions API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω (–æ—à–∏–±–∫–∞ 429), —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ **Great Circle Navigation** (–ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏–≥—Ä—É –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
1.  **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å**: –í —Ä–µ–∂–∏–º–µ –¥–µ—Ç–µ–∫—Ç–∏–≤–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å **–æ—Ç–¥–µ–ª–µ–Ω** –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—è. –ü—Ä–µ–¥–º–µ—Ç—ã –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è.
2.  **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–≥—Ä–µ—Å—Å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `localStorage` –±—Ä–∞—É–∑–µ—Ä–∞.

> –°—Ç–∞—Ç—É—Å: **Alpha Implemented** (Freiburg 1905 Vertical Slice complete).
> –î–æ—Å—Ç—É–ø–Ω–æ: Map (Sunset style), Dossier (Notebook), Hardlinks (Simulated), QR Scanner (Mock), Case #1 (Scripted).

---

## 0) –¶–µ–ª–∏ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –¶–µ–ª—å —Ä–µ–∂–∏–º–∞
–°–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ä–µ–∂–∏–º **Detective Mode**, –≥–¥–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:

**–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (–∫–∞—Ä—Ç–∞) ‚Üí Hardlink (QR/—Å–∏–º—É–ª—è—Ü–∏—è) ‚Üí VN-—Å—Ü–µ–Ω–∞ ‚Üí –£–ª–∏–∫–∏/—Ñ–ª–∞–≥–∏/—Ç–æ—á–∫–∏ ‚Üí (—Ä–µ–¥–∫–æ) –∫–∞—Ä—Ç–æ—á–Ω–∞—è –∫—É–ª—å–º–∏–Ω–∞—Ü–∏—è ‚Üí –≤—ã–≤–æ–¥/—Ä–∞–∑–≤—è–∑–∫–∞**

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **Core vs Pack**: –º–µ—Ö–∞–Ω–∏–∫–∏ (Core) –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ç—Ç–∏–Ω–≥–∞/–¥–µ–ª–∞ (Pack).
- **Hardlink = –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã**: QR (–∏–ª–∏ —Å–∏–º—É–ª—è—Ü–∏—è) —Å–ª—É–∂–∏—Ç ‚Äú—è–∫–æ—Ä–µ–º‚Äù –¥–ª—è —Å–æ–±—ã—Ç–∏–π, –≤–º–µ—Å—Ç–æ —É–ø–æ—Ä–∞ –Ω–∞ GPS (–≤ —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏).
- **–ù–∏–∫–∞–∫–∏—Ö ‚Äú—Å–æ—Ñ—Ç–ª–æ–∫–æ–≤‚Äù –ø–æ –Ω–∞–≤—ã–∫–∞–º**: skill gates –¥–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏, –Ω–æ **–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç** –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å.
- **–†–µ–¥–∫–∏–µ —Å—Ö–≤–∞—Ç–∫–∏/–¥–æ–ø—Ä–æ—Å—ã**: –∫–∞—Ä—Ç–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∫–∞–∫ –∫—É–ª—å–º–∏–Ω–∞—Ü–∏—è**, –∞ –Ω–µ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–∞—è –ø–µ—Ç–ª—è.
- **Inspired / Fictional**: —Å–µ—Ç—Ç–∏–Ω–≥ ‚Äú–≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω‚Äù –§—Ä–∞–π–±—É—Ä–≥–æ–º 1905, –Ω–æ NPC –∏ –¥–µ—Ç–∞–ª–∏ –¥–æ–ø—É—Å–∫–∞—é—Ç —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Å–≤–æ–±–æ–¥—É.

---

## 1) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Core vs Pack

### 1.1 Detective Core (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å–ª–æ–π)
–°–æ—Å—Ç–∞–≤ Core:
- **Game Mode isolation**: –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ä–µ–∂–∏–º–∞ (–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å/–ø—Ä–æ–≥—Ä–µ—Å—Å/—Ä–µ–ø—É—Ç–∞—Ü–∏—è/—Ñ–ª–∞–≥–∏).
- **Hardlink Resolver**: –∫–æ–Ω—Ç—Ä–∞–∫—Ç `gw3:hardlink:{packId}:{hardlinkId}` ‚Üí —Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π.
- **Dossier (–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –¥–æ—Å—å–µ)**: –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ —É–ª–∏–∫, —Ñ–ª–∞–≥–æ–≤ –∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ª–æ–∫–∞—Ü–∏–π.
- **Map as Investigation Tool**: –∫–∞—Ä—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ç–æ—á–∫–∏ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.
- **Investigation Clock (–∑–∞–≥–ª—É—à–∫–∞)**: –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–µ –≤—Ä–µ–º—è/‚ÄúHeat‚Äù/–¥–µ–¥–ª–∞–π–Ω—ã.
- **Battle hooks**: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞—Ä—Ç–æ—á–Ω—É—é –∫—É–ª—å–º–∏–Ω–∞—Ü–∏—é –∏–∑ VN –∏–ª–∏ Hardlink.

### 1.2 Content Pack (—Å–µ—Ç—Ç–∏–Ω–≥/–∫–æ–Ω—Ç–µ–Ω—Ç)
Pack –≤–∫–ª—é—á–∞–µ—Ç:
- **RegionConfig** (–∫–∞—Ä—Ç–∞/—Ü–µ–Ω—Ç—Ä/–æ–≤–µ—Ä–ª–µ–π/—Ä–∞–π–æ–Ω—ã).
- **–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ—á–µ–∫** (POI) —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏.
- **Hardlink —Ç–∞–±–ª–∏—Ü—É** (ID ‚Üí –¥–µ–π—Å—Ç–≤–∏—è).
- **VN-—Å—Ü–µ–Ω—ã** (–∞–∫—Ç—ã/–¥–∏–∞–ª–æ–≥–∏/–≤—ã–±–æ—Ä—ã).
- **Dossier entries** (–ø—Ä–æ—Ñ–∏–ª–∏/–ª–æ–∫–∞—Ü–∏–∏/–∏–Ω—Ç–µ–ª).
- **–ê—Å—Å–µ—Ç—ã** (—Ñ–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, ‚Äú–±—É–º–∞–∂–Ω–∞—è‚Äù —Ç–µ–∫—Å—Ç—É—Ä–∞, –æ–±–ª–æ–∂–∫–∏).

---

## 2) –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–≥–¥–µ —á—Ç–æ –ª–µ–∂–∏—Ç)

### 2.1 –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Ä–µ–∂–∏–º–∞
- UI-–ø–∞–Ω–µ–ª—å ‚ÄúüïµÔ∏è Archiv: Freiburg 1905‚Äù –Ω–∞ Home.
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è `gameMode = 'detective'` –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É.

–§–∞–π–ª:
- `src/pages/HomePage.tsx`

### 2.2 GameMode (–∏–∑–æ–ª—è—Ü–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è)
–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- `useInventoryStore` –¥–µ—Ä–∂–∏—Ç `gameMode: 'survival' | 'detective'`.
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–æ–≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å ‚Äú–ø–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è‚Äù –º–µ–∂–¥—É –±—É—Ñ–µ—Ä–∞–º–∏ `survivalState` –∏ `detectiveState`.
- Backend-sync –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è **–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç** detective –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å (–ø—Ä–æ—Ç–æ—Ç–∏–ø).

–§–∞–π–ª:
- `src/entities/inventory/model/store.ts`

> –í–∞–∂–Ω–æ: —Å–µ–π—á–∞—Å **Detective inventory –ª–æ–∫–∞–ª—å–Ω—ã–π**, –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –º–æ–¥–µ–ª–∏ ‚Äú—É–ª–∏–∫–∏ –∫–∞–∫ –ø—Ä–µ–¥–º–µ—Ç—ã‚Äù. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞.

### 2.3 Dossier Store (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω–∫–∞ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è)
–•—Ä–∞–Ω–∏—Ç:
- `entries`: –¥–æ–∫—É–º–µ–Ω—Ç—ã/–ø—Ä–æ—Ñ–∏–ª–∏/–∏–Ω—Ç–µ–ª (—á–∞—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å locked).
- `evidence`: —Å–ø–∏—Å–æ–∫ —É–ª–∏–∫.
- `unlockedPoints`: id –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–æ—á–µ–∫ (–¥–ª—è –∫–∞—Ä—Ç—ã).
- `flags`: –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ (–ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è).

–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
- Zustand `persist` —Å –∫–ª—é—á–æ–º `detective-dossier` (localStorage).

–§–∞–π–ª—ã:
- `src/features/detective/dossier/store.ts`
- `src/features/detective/dossier/Dossier.tsx`
- `src/features/detective/dossier/index.ts`

### 2.4 Hardlinks (QR/—Å–∏–º—É–ª—è—Ü–∏—è)
–ö–æ–Ω—Ç—Ä–∞–∫—Ç:
```
gw3:hardlink:{packId}:{hardlinkId}
```

–í –ø—Ä–æ—Ç–æ—Ç–∏–ø–µ:
- Hardlinks —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è **–ª–æ–∫–∞–ª—å–Ω–æ** –ø–æ —Ç–∞–±–ª–∏—Ü–µ.
- –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏/—Ç–æ–∫–µ–Ω–∞ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (—Å–º. —Ä–∞–∑–¥–µ–ª 7).

–î–µ–π—Å—Ç–≤–∏—è (`HardlinkAction`):
- `start_vn` ‚Üí –æ—Ç–∫—Ä—ã—Ç—å VN —Å—Ü–µ–Ω—É.
- `grant_evidence` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å —É–ª–∏–∫—É –≤ Dossier.
- `unlock_point` ‚Üí –æ—Ç–∫—Ä—ã—Ç—å —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ (—á–µ—Ä–µ–∑ Dossier).
- `add_flags` ‚Üí –∑–∞–ø–∏—Å–∞—Ç—å —Ñ–ª–∞–≥–∏ –≤ Dossier.
- `start_battle` ‚Üí –æ—Ç–∫—Ä—ã—Ç—å TutorialBattlePage c `scenarioId` –∏ `deckType`.

–§–∞–π–ª—ã:
- `src/features/detective/hardlinks.ts`
- `src/features/detective/index.ts`

### 2.5 QRScannerPage: —Ä–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏
–ü–æ–≤–µ–¥–µ–Ω–∏–µ:
- –ï—Å–ª–∏ `gameMode === 'detective'`, QR Scanner **–ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç** —Å–∫–∞–Ω –∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å hardlink –ª–æ–∫–∞–ª—å–Ω–æ.
- –î–æ–±–∞–≤–ª–µ–Ω **—Ä—É—á–Ω–æ–π –≤–≤–æ–¥ hardlink** –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ (–±–µ–∑ –∫–∞–º–µ—Ä—ã) + –±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ —Ç–µ—Å—Ç–æ–≤.

–§–∞–π–ª:
- `src/pages/QRScannerPage.tsx`

### 2.6 MapView: Vintage + detective points
–ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤ Detective Mode:
- –í–∫–ª—é—á–∞–µ—Ç—Å—è ‚Äúvintage overlay‚Äù (sepia + paper texture).
- –ö–∞—Ä—Ç–∞ ‚Äú–ø—Ä—ã–≥–∞–µ—Ç‚Äù –Ω–∞ —Ü–µ–Ω—Ç—Ä `FREIBURG_1905.geoCenterLngLat`.
- –û—Ç–∫–ª—é—á–∞–µ—Ç—Å—è proximity auto-discover (GPS-–¥–∏—Å–∫–∞–≤–µ—Ä).
- –í –º–∞—Ä–∫–µ—Ä—ã –ø–æ–¥–º–µ—à–∏–≤–∞—é—Ç—Å—è —Ç–æ—á–∫–∏ –∏–∑ `useDossierStore.unlockedPoints`.

–§–∞–π–ª—ã:
- `src/widgets/map/map-view/MapView.tsx`
- `src/features/detective/points.ts`
- `src/shared/hexmap/regions.ts`

### 2.7 Visual Novel (–¥–µ—Ç–µ–∫—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω—ã)
–°—Ü–µ–Ω—ã Freiburg 1905 –ª–µ–∂–∞—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–ª–∞–≤–µ `detective`.

–§–∞–π–ª—ã:
- `src/entities/visual-novel/scenarios/detective/case1.ts`
- `src/entities/visual-novel/scenarios/index.ts` (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≥–ª–∞–≤—ã)

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ—Ç–æ—Ç–∏–ø–µ —Ç–µ–∫—Å—Ç—ã VN-—Å—Ü–µ–Ω –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ EN –∏ –Ω–µ i18n-—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã.

### 2.8 Card Battles (—Ä–µ–¥–∫–∏–µ –∫—É–ª—å–º–∏–Ω–∞—Ü–∏–∏)
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- Hardlink action `start_battle` –Ω–∞–≤–∏–≥–∏—Ä—É–µ—Ç –Ω–∞ `Routes.TUTORIAL_BATTLE?scenarioId=...&deckType=detective`.
- `TutorialBattlePage` —á–∏—Ç–∞–µ—Ç `scenarioId` –∏ –ø–æ–¥–º–µ–Ω—è–µ—Ç –∫–æ–ª–æ–¥—É –Ω–∞ detective deck.

–°—Ü–µ–Ω–∞—Ä–∏–π:
- –î–æ–±–∞–≤–ª–µ–Ω `detective_skirmish` (–æ–¥–∏–Ω –≤—Ä–∞–≥ ‚ÄúSmuggler Thug‚Äù).

Deck:
- `generateDetectiveDeck(ownerId)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ card.id** (–≤–∞–∂–Ω–æ –¥–ª—è UI/drag&drop).

–§–∞–π–ª—ã:
- `src/entities/dreyzab-combat-simulator/model/scenarios.ts`
- `src/pages/TutorialBattlePage.tsx`
- `src/features/detective/combat/cards.ts`
- `src/features/detective/combat/deck.ts`
- `src/features/detective/combat/index.ts`

---

## 3) Freiburg 1905 Pack ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 3.1 Region: FREIBURG_1905
–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ/—Ñ–∏—á–∏:
- `features.vintageStyle = true`
- `districts`: Altstadt / Schneckenvorstadt / Wiehre / St√ºhlinger
- `imageUrl`: `/images/regions/freiburg_old.jpg`

–§–∞–π–ª:
- `src/shared/hexmap/regions.ts`

> Districts —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –∫–æ–Ω—Ñ–∏–≥/–æ–ø–∏—Å–∞–Ω–∏–µ. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–æ–Ω –Ω–∞ –∫–∞—Ä—Ç–µ ‚Äî **TODO** (—Å–º. —Ä–∞–∑–¥–µ–ª 7).

### 3.2 Factions (–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ª–æ–π Pack)
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ñ—Ä–∞–∫—Ü–∏–∏ Freiburg 1905:
- Police (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)
- Corps (—Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–µ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏)
- Underworld (–∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∞/—Ç–∞–≤–µ—Ä–Ω—ã)
- Banks/Bourgeoisie (–≤–ª–∏—è–Ω–∏–µ –∏ –¥–∞–≤–ª–µ–Ω–∏–µ)
- Socialists (—Ä–∞–±–æ—á–∏–µ —Ä–∞–π–æ–Ω—ã/–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω)

–°–µ–π—á–∞—Å:
- –í –ø—Ä–æ—Ç–æ—Ç–∏–ø–µ –æ–Ω–∏ –Ω–µ ‚Äú–ø—Ä–æ—à–∏—Ç—ã‚Äù –≤ —Ä–µ–ø—É—Ç–∞—Ü–∏—é/—Å–µ—Ä–≤–µ—Ä, –Ω–æ –º–æ–≥—É—Ç –∂–∏—Ç—å –∫–∞–∫ `flags` –∏ `entries`.

### 3.3 –¢–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ (detective points)
–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ—á–µ–∫ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π):
- `hauptbahnhof` ‚Äî –≤–æ–∫–∑–∞–ª
- `munsterplatz_bank` ‚Äî Bankhaus J.A. Krebs (–º–µ—Å—Ç–æ –æ–≥—Ä–∞–±–ª–µ–Ω–∏—è)
- `ganter_brauerei` ‚Äî –ø–∏–≤–Ω–∞—è/–∏–Ω—Ñ–æ–±–∏—Ä–∂–∞ (—Ä–∞–±–æ—á–∏–µ, —Å–ª—É—Ö–∏)
- `rathaus_archiv` ‚Äî –∞—Ä—Ö–∏–≤/–ø–ª–∞–Ω—ã/—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- `stuhlinger_warehouse` ‚Äî —Å–∫–ª–∞–¥ (—Ä–∞–∑–≤—è–∑–∫–∞)
- `basler_hof` ‚Äî –ø–æ–ª–∏—Ü–∏—è (–æ—Ç—á—ë—Ç/–¥–∞–≤–ª–µ–Ω–∏–µ)

–§–∞–π–ª:
- `src/features/detective/points.ts`

### 3.4 Hardlinks Freiburg 1905 (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä)
PackId: `fbg1905`

–¢–µ–∫—É—â–∏–µ hardlinks:
- `CASE01_BRIEFING_01` ‚Üí —Å—Ç–∞—Ä—Ç –¥–µ–ª–∞ (VN) + –æ—Ç–∫—Ä—ã—Ç—å `hauptbahnhof` + `det:case01:started`
- `CASE01_BANK_02` ‚Üí –º–µ—Å—Ç–æ –æ–≥—Ä–∞–±–ª–µ–Ω–∏—è (VN) + –æ—Ç–∫—Ä—ã—Ç—å `munsterplatz_bank`
- `CASE01_PUB_03` ‚Üí —Å–ª—É—Ö–∏/—Ä–∞–±–æ—á–∏–µ (VN) + –æ—Ç–∫—Ä—ã—Ç—å `ganter_brauerei`
- `CASE01_ARCHIVE_04` ‚Üí –∞—Ä—Ö–∏–≤/–ø–ª–∞–Ω—ã (VN) + –æ—Ç–∫—Ä—ã—Ç—å `rathaus_archiv`
- `CASE01_WAREHOUSE_05` ‚Üí —Ä–∞–∑–≤—è–∑–∫–∞ (VN) + –æ—Ç–∫—Ä—ã—Ç—å `stuhlinger_warehouse`
- `TEST_BATTLE_01` ‚Üí battle `detective_skirmish`
- `TEST_LINK` ‚Üí flags (—Ç–µ—Å—Ç)

–§–∞–π–ª:
- `src/features/detective/hardlinks.ts`

### 3.5 Case #1 (Vertical Slice): ‚Äú–û–≥—Ä–∞–±–ª–µ–Ω–∏–µ –Ω–∞ –ú—é–Ω—Å—Ç–µ—Ä–ø–ª–∞—Ü‚Äù
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∞–∫—Ç—ã):
- Act 0: –±—Ä–∏—Ñ–∏–Ω–≥ (–∑–∞–≤—è–∑–∫–∞)
- Act 1: –±–∞–Ω–∫ –Ω–∞ M√ºnsterplatz (–æ—Å–º–æ—Ç—Ä + —É–ª–∏–∫–∏)
- Act 2: –≤–µ–∫—Ç–æ—Ä–∞ (–ø–∏–≤–Ω–∞—è / –∞—Ä—Ö–∏–≤ / –ø–ª–∞–Ω—ã)
- Act 3: —Ä–∞–∑–≤—è–∑–∫–∞ (—Å–∫–ª–∞–¥ –≤ St√ºhlinger)

–§–∞–π–ª:
- `src/entities/visual-novel/scenarios/detective/case1.ts`

NPC (–≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ, –¥–æ–ø—É—Å–∫–∞—é—Ç –≤—ã–º—ã—Å–µ–ª):
- Gendarm (–ø–æ–ª–∏—Ü–∏—è –Ω–∞ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏–∏)
- Clerk (–±–∞–Ω–∫)
- Worker (–ø–∏–≤–Ω–∞—è)

> –î–ª—è ‚Äú–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π‚Äù –≤–µ—Ä—Å–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∏—Ç—å generic-—Ä–æ–ª–ª–∏–Ω–≥ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–µ –ª–∏—á–Ω–æ—Å—Ç–∏ (RU/DE –∏–º–µ–Ω–∞, –∫—Ä–∞—Ç–∫–∏–µ –ø—Ä–æ—Ñ–∏–ª–∏ –≤ Dossier).

---

## 4) –ê—Å—Å–µ—Ç—ã (—á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è Freiburg 1905)

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ:
- Paper texture: `public/images/paper-texture.png`
- –§–æ–Ω—ã VN (placeholders –¥–æ–ø—É—Å—Ç–∏–º—ã):
  - `/images/scenarios/station_1905.jpg`
  - `/images/scenarios/construction_site_1905.jpg`
  - `/images/scenarios/pub_interior_1905.jpg`
  - `/images/scenarios/restaurant_1905.jpg`
  - `/images/scenarios/warehouse_night_1905.jpg`
- –û–±–ª–æ–∂–∫–∏ —Ä–µ–≥–∏–æ–Ω–æ–≤:
  - `public/images/regions/freiburg.jpg`
  - `public/images/regions/freiburg_old.jpg`
  - `public/images/regions/karlsruhe.jpg`

---

## 5) RU + DE (–ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è)

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- i18n –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`ru/en/de`) –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –≤ Settings, –Ω–æ **Detective UI/–∫–æ–Ω—Ç–µ–Ω—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º hardcoded**.

–§–∞–π–ª:
- `src/shared/lib/i18n.ts`

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –¥–µ—Ç–µ–∫—Ç–∏–≤–∞
–î–æ–±–∞–≤–∏—Ç—å namespaces:
- `detective` ‚Äî UI —Ä–µ–∂–∏–º–∞ (–∫–Ω–æ–ø–∫–∏/–ª–µ–π–±–ª—ã/–æ—à–∏–±–∫–∏ hardlink)
- `detective_fbg1905` ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç Freiburg 1905 (–Ω–∞–∑–≤–∞–Ω–∏—è —É–ª–∏–∫/—Ç–æ—á–µ–∫/–ø—Ä–æ—Ñ–∏–ª–µ–π/—Ç–µ–∫—Å—Ç—ã –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏–Ω—Ç–µ–ª–æ–≤)
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `detective_vn` ‚Äî –µ—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏–º i18n –¥–ª—è VN —Å—Ü–µ–Ω

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –¥–≤–∏–∂–∫–∞ VN):
1) –í—ã–Ω–µ—Å—Ç–∏ UI —Å—Ç—Ä–æ–∫–∏ (Case File, –æ—à–∏–±–∫–∏ hardlink, –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞) –≤ `t()`.
2) –í—ã–Ω–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è evidence/points/entries –≤ `t()`.
3) VN-—Ç–µ–∫—Å—Ç—ã ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–º —ç—Ç–∞–ø–æ–º (–º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ü–µ–Ω—ã –≤ –¥–≤—É—Ö –≤–µ—Ä—Å–∏—è—Ö –ª–∏–±–æ —Å–¥–µ–ª–∞—Ç—å —Ä–µ–∑–æ–ª–≤–µ—Ä —Å—Ç—Ä–æ–∫ —á–µ—Ä–µ–∑ i18n).

---

## 6) Investigation Clock / Calendar (–∑–∞–≥–ª—É—à–∫–∞)

–ü–æ–∫–∞ **–∫–∞–ª–µ–Ω–¥–∞—Ä—è –Ω–µ—Ç**, –Ω–æ Core –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å ‚Äú–≤—Ä–µ–º—è —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è‚Äù.

### –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (stub)
–°–æ—Å—Ç–æ—è–Ω–∏–µ:
- `investigationDay: number` (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –¥–Ω–∏)
- `timeSlot: 'morning' | 'afternoon' | 'evening' | 'night'`
- `heat: number` (–≤–Ω–∏–º–∞–Ω–∏–µ –ø–æ–ª–∏—Ü–∏–∏/–ø—Ä–µ—Å—Å—ã/–ø–æ–¥–ø–æ–ª—å—è)
- `deadlines: Record<string, number>` (—É—Å–ª–æ–≤–Ω—ã–µ –¥–µ–¥–ª–∞–π–Ω—ã –ø–æ –¥–µ–ª–∞–º)

–¢—Ä–∏–≥–≥–µ—Ä—ã:
- Hardlink scan ‚Üí +time, +heat (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- VN choice ‚Üí +time (–µ—Å–ª–∏ ‚Äú–¥–æ–ª–≥–æ –∫–æ–ø–∞—Ç—å—Å—è‚Äù), +heat (–µ—Å–ª–∏ ‚Äú–¥–∞–≤–∏—Ç—å‚Äù)
- Battle ‚Üí +time, +heat (–æ–±—ã—á–Ω–æ –≤—ã—à–µ)

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–∫–æ–≥–¥–∞ –¥–æ–π–¥—ë–º):
- –æ—Ç–¥–µ–ª—å–Ω—ã–π store (–∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Dossier store) + –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ HUD.
- –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–≤–µ—Å—Ç–∞–º–∏/–≤–µ—Ç–≤–ª–µ–Ω–∏—è–º–∏: –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –¥–µ–¥–ª–∞–π–Ω–∞ ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω—ã/–∏—Å—Ö–æ–¥—ã.

---

## 7) –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è ‚Äú–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π‚Äù –≤–µ—Ä—Å–∏–∏ (–ø–æ—Å–ª–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞)

### 7.1 Hardlinks: –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
–°–µ–π—á–∞—Å:
- —Ç–∞–±–ª–∏—Ü–∞ hardlinks –ª–æ–∫–∞–ª—å–Ω–∞—è, –±–µ–∑ –ø–æ–¥–ø–∏—Å–∏, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏.

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è:
- Payload –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–ø–æ–¥–ø–∏—Å–∞–Ω** –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–∫–µ–Ω, –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–π —Å–µ—Ä–≤–µ—Ä–æ–º.
- –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å actions –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
  - anti-replay (one-time/—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)
  - –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –∞–∫–∫–∞—É–Ω—Ç—É/—É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
  - (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã/—Ç–∞–π–º-–æ–∫–Ω–∞

### 7.2 Persist gameMode –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å—Ö–µ–º—É:
- `game_progress.game_mode` (default `survival`)

–ù—É–∂–Ω–æ:
- –º–∏–≥—Ä–∞—Ü–∏—è/`drizzle push` (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞).
- API/–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/—á—Ç–µ–Ω–∏—è `gameMode` –∏–∑ progress, –µ—Å–ª–∏ —Ö–æ—Ç–∏–º ‚Äú–Ω–∞—Å—Ç–æ—è—â–∏–π‚Äù persist —Ä–µ–∂–∏–º–∞.

### 7.3 District visualization
–°–µ–π—á–∞—Å districts —Ç–æ–ª—å–∫–æ –≤ RegionConfig.

–ù—É–∂–Ω–æ:
- —Å–ª–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–∫—Ä—É–≥–∏/–ø–æ–ª–∏–≥–æ–Ω—ã), –ø–æ–¥—Å–∫–∞–∑–∫–∏ ‚Äú–≤—ã –≤–æ—à–ª–∏ –≤ Schneckenvorstadt‚Äù.

---

## 8) –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π Pack (–ø—Ä–∏–º–µ—Ä: Karlsruhe)

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç:
1) **RegionConfig**: –¥–æ–±–∞–≤–∏—Ç—å `KARLSRUHE_1900` –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–π (vintageStyle + districts).
2) **Points catalog**: `src/features/detective/points_karlsruhe.ts` –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞.
3) **Hardlinks table**: –Ω–æ–≤—ã–π `packId`, –Ω–∞–±–æ—Ä hardlinkId ‚Üí actions.
4) **VN scenes**: `src/entities/visual-novel/scenarios/detective/karlsruhe_case1.ts` –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.
5) **Dossier entries**: –Ω–æ–≤—ã–µ `entries` (–ø—Ä–æ—Ñ–∏–ª–∏/–∏–Ω—Ç–µ–ª), —Å–∫—Ä—ã—Ç—ã–µ –¥–æ unlock.
6) **Assets**: —Ñ–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –æ–±–ª–æ–∂–∫–∏ —Ä–µ–≥–∏–æ–Ω–∞.
7) (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –æ—Ç–¥–µ–ª—å–Ω–∞—è detective –∫–æ–ª–æ–¥–∞/—Å—Ü–µ–Ω–∞—Ä–∏–π –±–æ—è –ø–æ–¥ —Å–µ—Ç—Ç–∏–Ω–≥.

---

## 9) –ü—Ä–æ–≤–µ—Ä–∫–∞ (Definition of Done ‚Äî –ø—Ä–æ—Ç–æ—Ç–∏–ø)

### –ê–≤—Ç–æ
- `npm run typecheck`
- `npm run lint` (–æ—à–∏–±–æ–∫ –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ; –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ)

### Manual flow
1) Home ‚Üí ‚ÄúArchiv: Freiburg 1905‚Äù ‚Üí Map.
2) –í–∏–¥–Ω–æ vintage overlay, –∫–∞—Ä—Ç–∞ –ª–µ—Ç–∏—Ç –Ω–∞ —Ü–µ–Ω—Ç—Ä Freiburg 1905, proximity discover –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è.
3) QR Scanner:
   - `gw3:hardlink:fbg1905:CASE01_BRIEFING_01` ‚Üí —Å—Ç–∞—Ä—Ç –¥–µ–ª–∞ (VN) + point –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ
   - `gw3:hardlink:fbg1905:CASE01_BANK_02` ‚Üí –º–µ—Å—Ç–æ –æ–≥—Ä–∞–±–ª–µ–Ω–∏—è (VN) + point –Ω–∞ –∫–∞—Ä—Ç–µ (—É–ª–∏–∫–∏ –±–µ—Ä—É—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ VN)
   - `gw3:hardlink:fbg1905:CASE01_PUB_03` ‚Üí –ø–∏–≤–Ω–∞—è/—Å–ª—É—Ö–∏ (VN)
   - `gw3:hardlink:fbg1905:CASE01_ARCHIVE_04` ‚Üí –∞—Ä—Ö–∏–≤/–ø–ª–∞–Ω—ã (VN) + –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è `stuhlinger_warehouse`
   - `gw3:hardlink:fbg1905:CASE01_WAREHOUSE_05` ‚Üí —Ä–∞–∑–≤—è–∑–∫–∞ (VN)
   - `gw3:hardlink:fbg1905:TEST_BATTLE_01` ‚Üí battle `detective_skirmish` —Å detective deck

---

## 10) –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –ø–ª–∞–Ω–∞–º–∏ (Karlsruhe XIX‚ÄìXX / Freiburg 1890‚Äì1910)

### TL;DR
- **–ë–æ–ª—å—à–∞—è —á–∞—Å—Ç—å ‚Äú–º–µ—Ö–∞–Ω–∏–∫ –∏–∑ –ø–ª–∞–Ω–æ–≤‚Äù —É–∂–µ –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ** (VN, –∫–≤–µ—Å—Ç—ã, –∫–∞—Ä—Ç–∞+sceneBindings, QR-actions, —Ä–µ–ø—É—Ç–∞—Ü–∏—è, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, –±–æ–∏).
- **Detective Mode —Å–µ–π—á–∞—Å ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø–Ω—ã–π —Å–ª–æ–π**, –≥–¥–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ ‚Äú—É–ª–∏–∫–∏‚Äù –∂–∏–≤—É—Ç –ª–æ–∫–∞–ª—å–Ω–æ (Dossier) –∏ QR –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ `gw3:hardlink:*`.
- –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–∏–≤–Ω—ã–π Pack (Karlsruhe/Freiburg)** –≤ –¥—É—Ö–µ –ø–ª–∞–Ω–∞, –Ω—É–∂–Ω–æ (–∞) –≤—ã–±—Ä–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (server progress vs local dossier), (–±) –≤–∫–ª—é—á–∏—Ç—å pack-selection, (–≤) –∑–∞–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–µ —Ñ—Ä–∞–∫—Ü–∏–∏/—Å–∫–∏–Ω –≥–æ–ª–æ—Å–æ–≤.

### 10.1 –ü–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–∏—Å—Ç–µ–º—ã: —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `grezwanderer3`

**VN-—Å—Ü–µ–Ω—ã (–¥–∏–∞–ª–æ–≥–∏, –≤–µ—Ç–≤–ª–µ–Ω–∏—è, —ç—Ñ—Ñ–µ–∫—Ç—ã)**  
–ï—Å—Ç—å –¥–≤–∏–∂–æ–∫ VN –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–æ–ø—Ä–æ—Å–æ–≤/–æ—Å–º–æ—Ç—Ä–æ–≤/—Ä–∞–∑–≤—è–∑–æ–∫.
- `src/pages/VisualNovelPage.tsx`
- `src/entities/visual-novel/scenarios/`

**–ö–≤–µ—Å—Ç—ã (–¥–µ–ª–æ = –∫–≤–µ—Å—Ç/—Ü–µ–ø–æ—á–∫–∞ –∫–≤–µ—Å—Ç–æ–≤)**  
–ï—Å—Ç—å –∫–≤–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ –∏ API, –ø–ª—é—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–æ–π (questBindings/questCompleted).
- `server/src/api/routes/quests.ts`
- `src/entities/quest/`
- `src/shared/types/map.ts` (questBindings / unlockRequirements)

**–ö–∞—Ä—Ç–∞ + —Ç–æ—á–∫–∏ + sceneBindings (click/proximity/qr)**  
–°–∏—Å—Ç–µ–º–∞ —Ç–æ—á–µ–∫ –∏ —É—Å–ª–æ–≤–∏–π –∑–∞–ø—É—Å–∫–∞ —Å—Ü–µ–Ω —É–∂–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ —á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
- `src/shared/types/map.ts` (`SceneBinding.triggerType`, `visibility`, `unlockRequirements`)
- `server/src/seeds/mapPoints.ts` (–ø—Ä–∏–º–µ—Ä—ã —Ç–æ—á–µ–∫ —Å `sceneBindings`)
- `src/features/map/lib/resolveSceneBinding.ts`

**QR/Hardlink-–ø–æ—Ö–æ–∂–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (unlock_point/start_vn/add_flags/‚Ä¶‚Äã)**  
–í ‚Äú–æ—Å–Ω–æ–≤–Ω–æ–π‚Äù –∏–≥—Ä–µ QR-–∞–∫—Ç–∏–≤–∞—Ü–∏—è —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç actions –∏ —É–º–µ–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å VN/–≤—ã–¥–∞–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã/—Ä–µ–ø—É—Ç–∞—Ü–∏—é.
- `server/src/api/routes/map.ts` (`POST /map/activate-qr`)
- `server/src/lib/qrBonuses.ts` (—Ç–∞–±–ª–∏—Ü–∞ –±–æ–Ω—É—Å–æ–≤)
- `src/pages/QRScannerPage.tsx`

**–†–µ–≥–∏–æ–Ω—ã (–≤ —Ç.—á. Karlsruhe)**  
Karlsruhe —É–∂–µ –µ—Å—Ç—å –∫–∞–∫ RegionConfig (—Å —Ü–µ–Ω—Ç—Ä–æ–º –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏).
- `src/shared/hexmap/regions.ts` (`KARLSRUHE_REGION`, `FREIBURG_1905`)

**‚Äú–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–∞—Ä–ª–∞–º–µ–Ω—Ç‚Äù (18 –≥–æ–ª–æ—Å–æ–≤) + –ø—Ä–æ–≤–µ—Ä–∫–∏**  
–°–∏—Å—Ç–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤ –∏ UI —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç; –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–∏—Ç—å –ø–æ–¥ –º–µ—Ç–æ–¥—ã —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–±–µ–∑ —Å–º–µ–Ω—ã `VoiceId`).
- `src/shared/types/parliament.ts`
- `src/entities/parliament/lib/voiceDefinitions.ts`

**–ö–∞—Ä—Ç–æ—á–Ω—ã–µ —Å—Ö–≤–∞—Ç–∫–∏**  
–ë–æ–π –Ω–µ ‚Äú–∑–∞–≥–ª—É—à–∫–∞‚Äù: –µ—Å—Ç—å BattlePage, TutorialBattlePage, —Å—Ü–µ–Ω–∞—Ä–∏–∏, –∞ –≤ –¥–µ—Ç–µ–∫—Ç–∏–≤–µ —É–∂–µ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–ª–æ–¥–∞.
- `src/pages/BattlePage.tsx`
- `src/pages/TutorialBattlePage.tsx`
- `src/entities/dreyzab-combat-simulator/model/scenarios.ts`
- `src/features/detective/combat/`

**–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å/–ø—Ä–µ–¥–º–µ—Ç—ã (—É–ª–∏–∫–∏ –∫–∞–∫ –ø—Ä–µ–¥–º–µ—Ç—ã ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ)**  
–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å —É–∂–µ –±–æ–≥–∞—Ç—ã–π; QR-actions —É–º–µ—é—Ç `grant_items`.
- `src/entities/inventory/model/store.ts`
- `server/src/lib/qrBonuses.ts` (`grant_items`)

### 10.2 –ì–¥–µ —Ç–µ–∫—É—â–∏–π Detective –ø—Ä–æ—Ç–æ—Ç–∏–ø —Ä–∞—Å—Ö–æ–¥–∏—Ç—Å—è —Å ‚Äú–ø–ª–∞–Ω–æ–≤–æ–π‚Äù —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

**QR –≤ –ø–ª–∞–Ω–∞—Ö ‚â† QR –≤ –ø—Ä–æ—Ç–æ—Ç–∏–ø–µ**  
- –ü–ª–∞–Ω: QR ‚Üí —Å–µ—Ä–≤–µ—Ä –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç actions (–∞–Ω—Ç–∏-—Ä–µ–ø–ª–µ–π, –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –∞–∫–∫–∞—É–Ω—Ç—É, –¥—Ä.).
- –°–µ–π—á–∞—Å: `gw3:hardlink:*` —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ —Ç–∞–±–ª–∏—Ü–µ (—Å–∏–º—É–ª—è—Ü–∏—è/–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å—Ä–µ–∑).  
  –§–∞–π–ª—ã: `src/features/detective/hardlinks.ts`, `src/pages/QRScannerPage.tsx`

**–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∂–∏–≤—ë—Ç –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç game_progress**  
- –ü–ª–∞–Ω: –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–µ–ª–∞ —á–µ—Ä–µ–∑ –∫–≤–µ—Å—Ç—ã/—Ñ–ª–∞–≥–∏/—Ä–µ–ø—É—Ç–∞—Ü–∏—é/–ø—Ä–µ–¥–º–µ—Ç—ã (—Å–µ—Ä–≤–µ—Ä).
- –°–µ–π—á–∞—Å: –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π Dossier (entries/evidence/unlockedPoints/flags).  
  –§–∞–π–ª—ã: `src/features/detective/dossier/store.ts`, `src/features/detective/dossier/Dossier.tsx`

**–¢–æ—á–∫–∏ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞ –Ω–µ –∑–∞–≤–µ–¥–µ–Ω—ã –≤ –ë–î –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç unlockRequirements/sceneBindings**  
- –ü–ª–∞–Ω: —Ç–æ—á–∫–∏/–ª–æ–∫–∞—Ü–∏–∏ + —Å—Ü–µ–Ω—ã + —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (—Ñ–ª–∞–≥–∏/–∫–≤–µ—Å—Ç—ã/—Ä–µ–ø—É—Ç–∞—Ü–∏—è) ‚Äî –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ.
- –°–µ–π—á–∞—Å: –º–∏–Ω–∏–º—É–º —Ç–æ—á–µ–∫ –≤ `src/features/detective/points.ts`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–º–µ—à–∏–≤–∞—é—Ç—Å—è –≤ –∫–∞—Ä—Ç—É –∫–ª–∏–µ–Ω—Ç–æ–º.

**–§—Ä–∞–∫—Ü–∏–∏ –¥–µ—Ç–µ–∫—Ç–∏–≤–∞ –Ω–µ –∑–∞–≤–µ–¥–µ–Ω—ã –∫–∞–∫ ‚Äú—Å—É—â–Ω–æ—Å—Ç–∏ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞‚Äù –Ω–∞ –∫–∞—Ä—Ç–µ**  
–í —Ç–∏–ø–∞—Ö –∫–∞—Ä—Ç—ã `metadata.faction` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç–µ–∫—É—â–∏–º `FactionType` (–ø–æ—Å—Ç–∞–ø–æ-—Ñ—Ä–∞–∫—Ü–∏–∏).  
–î–ª—è `police/university/industrialists/press/underworld/society` –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ.
- `src/shared/types/map.ts`
- `server/src/shared/types/map.ts`

**–ì–æ–ª–æ—Å–∞/–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∫–∞ –Ω–µ ‚Äú–ø–µ—Ä–µ—Å–∫–∏–Ω—É—Ç—ã‚Äù –ø–æ–¥ –¥–µ—Ç–µ–∫—Ç–∏–≤ –∏ –ø–æ—á—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ detective VN**  
–°–∏—Å—Ç–µ–º–∞ –µ—Å—Ç—å, –Ω–æ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–µ—Ç–µ–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ü–µ–Ω –ø–æ–∫–∞ –±–µ–∑ skill-check‚Äô–æ–≤ –∏ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ ‚Äú—Å–∫–∏–Ω–∞‚Äù.
- `src/entities/visual-novel/scenarios/detective/case1.ts`

**Pack-selection —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –µ—â—ë –Ω–µ –≤—ã–¥–µ–ª–µ–Ω**  
–°–µ–π—á–∞—Å —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—Ç—ã –≤ Detective Mode –∂—ë—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ `FREIBURG_1905`, –∞ Dossier persist-–∫–ª—é—á –æ–±—â–∏–π ‚Üí –ø—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞–∫–∞—Ö –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–º–µ—à–∏–≤–∞—Ç—å—Å—è.
- `src/widgets/map/map-view/MapView.tsx` (snap –Ω–∞ `FREIBURG_1905`)
- `src/features/detective/dossier/store.ts` (persist key `detective-dossier`)

### 10.3 –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —à–∞–≥–∏, —á—Ç–æ–±—ã –ø—Ä–∏–≤–µ—Å—Ç–∏ Detective Mode –∫ –ø–ª–∞–Ω—É (–±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –≤—Å–µ–≥–æ)

1) **–í–≤–µ—Å—Ç–∏ ‚Äú–∞–∫—Ç–∏–≤–Ω—ã–π Pack‚Äù** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `activeDetectivePackId`) –∏:
   - –≤—ã–±–∏—Ä–∞—Ç—å `RegionConfig` (—Ü–µ–Ω—Ç—Ä/–æ–≤–µ—Ä–ª–µ–π/—Ä–∞–π–æ–Ω—ã) –ø–æ packId,
   - —Ö—Ä–∞–Ω–∏—Ç—å Dossier —Ä–∞–∑–¥–µ–ª—å–Ω–æ –ø–æ packId (–∫–ª—é—á `detective-dossier:{packId}`).
2) **–í—ã–±—Ä–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞**:
   - *–±—ã—Å—Ç—Ä–æ –∏ –æ—Ñ—Ñ–ª–∞–π–Ω*: –æ—Å—Ç–∞–≤–∏—Ç—å Dossier/Hardlink –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ (–∫–∞–∫ —Å–µ–π—á–∞—Å),
   - *–ø–ª–∞–Ω–æ–≤–æ/–ø—Ä–æ–¥–∞–∫—à–Ω*: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ ‚Äú—É–ª–∏–∫–∏/—Ñ–ª–∞–≥–∏/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏‚Äù –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—á–µ—Ä–µ–∑ `game_progress.flags`, `/quests`, `/map/activate-qr`, `QR_BONUSES`).
3) **–î–ª—è Karlsruhe XIX‚ÄìXX**:
   - –ª–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å `KARLSRUHE_1900` (vintageStyle + districts), –ª–∏–±–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `KARLSRUHE_REGION.geoCenterLngLat` –∏ –≤–∫–ª—é—á–∏—Ç—å vintage-—Ñ–∏—á–∏ –¥–ª—è –¥–µ—Ç–µ–∫—Ç–∏–≤–∞,
   - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫–∏/—Å—Ü–µ–Ω—ã/QR-–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (–∫–∞–∫ –¥–∞–Ω–Ω—ã–µ, –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ mapPoints/qrBonuses).
4) **–§—Ä–∞–∫—Ü–∏–∏ –¥–µ—Ç–µ–∫—Ç–∏–≤–∞**:
   - —Ä–∞—Å—à–∏—Ä–∏—Ç—å `FactionType` –∏–ª–∏ –∑–∞–≤–µ—Å—Ç–∏ `detectiveFactionId` –∫–∞–∫ string,
   - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `grant_reputation` –∏ —É—Å–ª–æ–≤–∏—è —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤ `SceneBindingCondition`.
5) **‚Äú–°–∫–∏–Ω‚Äù –≥–æ–ª–æ—Å–æ–≤ –¥–ª—è –¥–µ—Ç–µ–∫—Ç–∏–≤–∞**:
   - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å `VoiceId`, –Ω–æ –¥–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è/–∏–∫–æ–Ω–∫–∏/–æ–ø–∏—Å–∞–Ω–∏—è –≤ UI –¥–ª—è `gameMode === 'detective'`.


## 12) –î–∞–ª—å–Ω–µ–π—à–∏–µ —Ü–µ–ª–∏ (Roadmap to Beta)

### üéØ –¶–µ–ª—å 1: Server-Side Hardlinks
*   **–ó–∞–¥–∞—á–∞**: –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü—É `HARDLINKS` –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
*   **–ó–∞—á–µ–º**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø–æ–¥–ø–∏—Å—å), –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –∞–Ω—Ç–∏-—á–∏—Ç, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏–≤–µ–Ω—Ç—ã.
*   **–ü–ª–∞–Ω**:
    1.  –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `detective_hardlinks` –≤ –ë–î.
    2.  –≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /detective/scan` (–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞/–ø–æ–¥–ø–∏—Å–∏).
    3.  –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ —Å—ã—Ä–æ–π `HardlinkPayload`, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

### üéØ –¶–µ–ª—å 2: –ü—Ä–æ–≥—Ä–µ—Å—Å –≤ –æ–±–ª–∞–∫–µ
*   **–ó–∞–¥–∞—á–∞**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å `DossierStore` —Å —Å–µ—Ä–≤–µ—Ä–æ–º.
*   **–ó–∞—á–µ–º**: –ß—Ç–æ–±—ã –∏–≥—Ä–∞—Ç—å —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –¥–µ—Å–∫—Ç–æ–ø–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (—Å–µ–π—á–∞—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `localStorage`).
*   **–ü–ª–∞–Ω**:
    1.  –†–∞—Å—à–∏—Ä–∏—Ç—å `user_progress` (jsonb –ø–æ–ª–µ `detective_state`?).
    2.  Sync –ø—Ä–∏ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ.

### üéØ –¶–µ–ª—å 3: Content Pack "Karlsruhe"
*   **–ó–∞–¥–∞—á–∞**: –î–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π —Ä–µ–≥–∏–æ–Ω.
*   **–ó–∞—á–µ–º**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É `PackId`.
*   **–ü–ª–∞–Ω**:
    1.  –ö–æ–Ω—Ñ–∏–≥ `KARLSRUHE_1900`.
    2.  –°–≤–∏—Ç—á–µ—Ä –ø–∞–∫–æ–≤ –≤ `Dossier` (–≤—ã–±–æ—Ä –¥–µ–ª–∞).
    3.  –û—Ç–¥–µ–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä Hardlinks.
