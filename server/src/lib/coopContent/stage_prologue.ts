import type { CoopQuestNode } from '../../shared/types/coop'

export const COOP_STAGE_PROLOGUE_NODES: Record<string, CoopQuestNode> = {
    prologue_start: {
        id: 'prologue_start',
        title: 'Брифинг в палатке',
        background: '/images/Мультиплеер/сцена1инструктаж.png',
        description: `
Как вам уже известно, сегодня ночью открылся стабильный разлом и совет принял решение исследовать ту сторону. Мы послали уже несколько дронов, однако при прохождении они быстро приходят в негодность. Была утеряна связь с группой дронов «Эхо».

Локация: временный командный пункт FJR на горе Шлосберг.

Дождь стучит по брезенту. В палатке пахнет антисептиком и озоном. На столе — карта местности, папки с отчётами, рация и ящики со снаряжением.

Капитан Прайс («Ворон») говорит жёстко и сухо, будто режет воздух:

**Прайс:** «Разлом стабилен. Разведгруппа "Эхо" пропала. Наша задача — собрать побольше информации и вернуться. Не геройствовать. Не импровизировать. Вопросы?»

На ящиках сидит четвёрка «Ночной смены»:
Ева «Валькирия» Ковальова — хирург.
Йоханн «Vorschlag» Эйзенхауэр — инженер-артисан.
Дитрих «Ghost» Хаген — бывший снайпер FJR.
Агата «Шустрая» Вольф — анархистка и подрывник.
`,
        privateText: {
            valkyrie:
                'Колено Прайса "не держит" вес: он переносит нагрузку на здоровую ногу и чуть запаздывает на поворотах. Рана свежая или плохо залеченная. Он скрывает — значит, ему важно выглядеть несокрушимым.',
            ghost:
                'Тень у входа в палатку не совпадает с движением охраны. Кто-то стоит слишком близко, справа от входа, и слушает. Ты чувствуешь это кожей — как прицел на затылке.',
            vorschlag:
                'Сканеры на столе — старые модели. Провода потёрты, крепления "уставшие". Либо склад пуст, либо вас намеренно отправляют с тем, что не жалко потерять.',
            shustrya:
                'Прайс говорит так, будто читает инструкцию к смерти. В палатке слишком серьёзно. Слишком "по уставу". Тебе хочется зевнуть — и одновременно хочется взорвать что-нибудь, лишь бы воздух стал живым.',
        },
        interactionType: 'individual',
        choices: [
            // ===== ЕВА «ВАЛЬКИРИЯ» — МЕДИК =====
            {
                id: 'valkyrie_acid',
                text: '«Сэр, вы упомянули кислоту. Какой тип коррозии? Химический ожог, биологическое разложение? Нам нужно знать, какие антидоты и нейтрализаторы брать».',
                requiredRole: 'valkyrie',
                effectText:
                    'Прайс останавливается и смотрит на тебя. В его глазах на мгновение проскальзывает что-то похожее на уважение. Он ценит конкретику.\n\nПрайс: «Хороший вопрос, Док. По официальному отчёту — "неизвестный коррозийный агент". Но я видел, что осталось от брони. Она не просто растворилась. Она... потекла, как воск, а потом рассыпалась в пыль. Похоже на биологию, ускоренную какой-то каталитической реакцией. Так что бери с собой всё: и нейтрализующий гель широкого спектра, и стимуляторы регенерации. И молись, чтобы этого хватило».\n\nНуль бурчит скрежещущим голосом: «Образцы покажут. Нужны образцы. Без образцов — всё гадание».',
                nextNodeId: 'move_out',
            },
            {
                id: 'valkyrie_evac',
                text: '«Каков протокол эвакуации раненых?»',
                requiredRole: 'valkyrie',
                effectText:
                    'Ева: «Каков протокол эвакуации раненых, сэр?»\n\nПрайс (кивает, одобряя профессионализм): «Протокол прост, Доктор. Если кого-то ранят так, что он не может идти — вы стабилизируете его на месте. Остальные занимают оборону. Мы не бросаем своих. Но и вся группа не будет рисковать из-за одного. Если ситуация станет критической... решение буду принимать я. Ясно?»',
                nextNodeId: 'move_out',
            },
            {
                id: 'valkyrie_price_leg',
                text: '«Сэр, вы уверены, что готовы вести отряд? Ваша нога…»',
                requiredRole: 'valkyrie',
                effectText:
                    'В палатке воцаряется ледяная тишина. Прайс медленно поворачивается к тебе. Его взгляд становится жёстким, как сталь.\n\nПрайс (тихо, почти угрожающе): «Моё состояние, Доктор, вне вашей юрисдикции. Вы следите за здоровьем отряда. Я — слежу за выполнением миссии. Ещё раз поставите под сомнение мой приказ или мою боеспособность — и будете наблюдать за этой миссией из карцера. Я понятно выразился?»\n\nВнутренний голос: «Нерв задет. Он скрывает слабость. Опасно. Но теперь я знаю, на что давить, если потребуется».',
                nextNodeId: 'move_out',
            },
            // ===== АГАТА «ШУСТРАЯ» — ПОДРЫВНИК =====
            {
                id: 'shustrya_explosives',
                text: '«Можно нам побольше взрывчатки? От неё любая проблема становится меньше».',
                requiredRole: 'shustrya',
                effectText:
                    'Прайс не улыбается: «Взрывчатка — инструмент, а не настроение. Получите стандартный комплект. Применение — по ситуации и по команде. Не устроишь фейерверк, Агата».',
                nextNodeId: 'move_out',
            },
            {
                id: 'shustrya_pay',
                text: '«Нам заплатят за каждого убитого мутанта или за час работы?»',
                requiredRole: 'shustrya',
                effectText:
                    'Прайс: «Вам платят за результат. Данные, маршрут, живые возвращаются. За трупы — только проблемы. Не превращайте миссию в охоту».',
                nextNodeId: 'move_out',
            },
            {
                id: 'shustrya_taunt',
                text: '«Эй, командир, ты закончил свою воодушевляющую речь? А то мы тут почти уснули».',
                requiredRole: 'shustrya',
                effectText:
                    'Прайс даже не смотрит на неё. Он смотрит на Йоханна.\n\nПрайс: «Эйзенхауэр. Если эта... деталь вашего отряда... создаст проблемы на миссии, я разрешаю использовать её в качестве приманки. Может, её яркие волосы отвлекут мутантов».\n\nЙоханн (смущённо): «Сэр, она... она просто шутит».\n\nПрайс (поворачивается к Агате, в глазах нет и тени улыбки): «Я не шучу. Здесь не сквот анархистов. Здесь умирают. Быстро и глупо. Следующая "шутка" — и ты идёшь первой. Без оружия».',
                nextNodeId: 'move_out',
            },
            // ===== ЙОХАНН «VORSCHLAG» — ТЕХНИК =====
            {
                id: 'vorschlag_env',
                text: '«Какое сопротивление среды ожидается? ЭМИ, радиация, коррозия?»',
                requiredRole: 'vorschlag',
                effectText:
                    'Прайс: «Ничего "штатного". Возможны помехи связи и отказ электроники. Всё, что критично — держать в экранировании. Если металл начнёт "цвести" — не трогать голыми руками». Нуль бурчит: «Фон там… другой».',
                nextNodeId: 'move_out',
            },
            {
                id: 'vorschlag_drones',
                text: '«Мы получим доступ к полным данным с потерянных дронов?»',
                requiredRole: 'vorschlag',
                effectText:
                    'Прайс: «Если данные целы — да. Если нет — вы принесёте то, что найдёте. Кабель дрона нашли порванным. Кто-то хотел, чтобы мы смотрели слепыми».',
                nextNodeId: 'move_out',
            },
            {
                id: 'vorschlag_old_scanners',
                text: '«Сэр, почему нам выдают устаревшие модели сканеров? Это всё, что есть, или на нас экономят?»',
                requiredRole: 'vorschlag',
                effectText:
                    'Прайс: «Потому что новые на той стороне сходят с ума. Эти — хотя бы врут предсказуемо. И да: если что-то сгорит — мне легче будет списать это со склада, чем вас».',
                nextNodeId: 'move_out',
            },
            // ===== ДИТРИХ «GHOST» — СНАЙПЕР =====
            {
                id: 'ghost_rules',
                text: '«Каковы правила ведения огня? Свободная охота или только по приказу?»',
                requiredRole: 'ghost',
                effectText:
                    'Прайс: «Огонь — только по цели. Угроза жизни — действуешь. Всё остальное — по приказу. Первый выстрел — это дверь, которую назад не закрыть».',
                nextNodeId: 'move_out',
            },
            {
                id: 'ghost_visibility',
                text: '«Какова предполагаемая дальность видимости на той стороне?»',
                requiredRole: 'ghost',
                effectText:
                    'Прайс: «Местами — как в тумане. Местами — будто воздух прозрачнее стекла. Не рассчитывай на привычные дистанции. Там даже шаг может стоить больше, чем километр здесь».',
                nextNodeId: 'move_out',
            },
            {
                id: 'ghost_intruder',
                text: '«Сэр, мы здесь не одни. За палаткой кто-то есть. Справа от входа».',
                requiredRole: 'ghost',
                effectText:
                    'Дитрих говорит тихо — и этого достаточно, чтобы все замерли.\n\nПрайс мгновенно меняется. Расслабленная поза исчезает.\n\nПрайс (шёпотом): «Все на своих местах. Делаем вид, что ничего не происходит».\n\nПо общей рации — для подслушивающего: «…Итак, как я уже говорил, выдвигаемся через десять минут. Снаряжение проверить!»',
                nextNodeId: 'move_out',
            },
            // ===== МОЛЧАНИЕ =====
            {
                id: 'briefing_silent',
                text: 'Промолчать',
                effectText:
                    'Прайс: «Вопросов нет? Отлично. Значит, всё поняли. Или вам просто наплевать. В любом случае — выдвигаемся через десять минут. Проверить снаряжение».',
                nextNodeId: 'move_out',
            },
        ],
    },

    // ===== СЦЕНА 2: ВЫХОД К РАЗЛОМУ =====
    move_out: {
        id: 'move_out',
        title: 'Проводы в ад',
        background: '/images/Мультиплеер/сцена2выход.png',
        description: `
Прайс надевает шлем. Его голос становится глухим и механическим.

**Прайс:** «Хватит болтовни. Снаряжение на себя. Проверка связи».

Вы быстро проверяете рации, подгоняете ремни гермокостюмов. Через две минуты брезентовый полог палатки откидывается, и вас обдаёт волной холодного, влажного воздуха.

Картина, открывшаяся снаружи, заставляет даже самых закалённых из вас замереть.

Вы стоите на краю укреплённого пункта, окружённого колючей проволокой. Вокруг — выжженная земля, усеянная чёрными, оплавленными панцирями чудовищ. Солдаты FJR в тяжёлой броне молча провожают вас взглядами.

Впереди, метрах в четырёхстах, склон горы уходит вверх, и там, на фоне серого рассветного неба, зияет ваша цель — **Разлом**. Он похож на вертикальную трещину в реальности, из которой исходит больное фиолетово-зелёное сияние и низкий, давящий на уши гул.
`,
        privateText: {
            valkyrie: 'Ты замечаешь, что один из солдат FJR, молодой парень, украдкой крестит вас вслед. Он думает, что вы уже мертвы.',
            ghost: 'На позиции снайпера за периметром ты замечаешь знакомый силуэт. Это Вернер — тот, кто учил тебя стрелять. Он молча кивает тебе. Прощается.',
            vorschlag: 'Тебя поражает количество сгоревшей техники вокруг. Не просто сломанной — именно сгоревшей. Электроника взрывалась изнутри.',
            shustrya: 'Агата тихо присвистывает: «М-да... Вечеринка, похоже, была жаркой».',
        },
        interactionType: 'individual',
        choices: [
            {
                id: 'march_begin',
                text: 'Начать подъём к Разлому',
                effectText:
                    '**Прайс (по рации):** «Двигаемся. Док, держись в центре группы. Твоя шкура нам ещё понадобится».\n\nВы начинаете подъём. Воздух становится тяжелее. Под ногами хрустят не только ветки, но и мелкие красные кристаллы.',
                nextNodeId: 'path_to_rift',
            },
        ],
    },

    // ===== СЦЕНА 3: ПУТЬ К РАЗЛОМУ (СКАНИРОВАНИЕ) =====
    path_to_rift: {
        id: 'path_to_rift',
        title: 'Чтение шрамов',
        background: '/images/Мультиплеер/сцена3путь.png',
        description: `
**Нуль:** «Сканировать всё. Данные нужны. Красные кристаллы. Мох. Всё».

Ты достаёшь полевой сканер «Око». Его интерфейс оживает, выводя на твой нашлемный дисплей потоки данных.

Вокруг тебя — странный мир на границе реальностей. Под ногами хрустят красные кристаллы. На камнях светится голубой мох. Воздух густой и давящий.

**Прайс (по рации):** «Всем смотреть в оба. Ева, Йоханн — мне нужны данные по окружающей среде. Дитрих, ищи следы и угрозы. Агата... постарайся ничего не взорвать. Пока что».
`,
        privateText: {
            valkyrie: 'Твой медицинский сканер переключён в режим био-анализа. HUD подсвечивает биологически активные объекты.',
            ghost: 'Ты замечаешь следы. Не человеческие. Что-то крупное прошло здесь недавно, волоча за собой... хвост? Нет, тело.',
            vorschlag: 'Сканер ищет аномалии в материалах и энергетические поля. Показатели нестабильны.',
            shustrya: 'Кристаллы под ногами напоминают тебе рубиновую крошку. Красиво. И, вероятно, смертельно.',
        },
        interactionType: 'individual',
        choices: [
            // ===== ЕВА — МЕДИК =====
            {
                id: 'scan_crystals',
                text: 'Просканировать красные кристаллы под ногами',
                requiredRole: 'valkyrie',
                effectText:
                    '**АНАЛИЗ:** МИНЕРАЛ, ТИП НЕИЗВЕСТЕН. ВЫСОКОЕ СОДЕРЖАНИЕ ЖЕЛЕЗА И... ГЕМОГЛОБИНА? ОРГАНИЧЕСКОЕ ПРОИСХОЖДЕНИЕ. КРАЙНЕ ЭНЕРГОЁМКИЙ.\n\nВнутренний голос: «Это... застывшая кровь? Чья-то кровь кристаллизовалась? Если это так, то здесь произошло что-то чудовищное. Нужен образец».',
                nextNodeId: 'approach_rift',
            },
            {
                id: 'scan_moss',
                text: 'Просканировать светящийся голубой мох на камнях',
                requiredRole: 'valkyrie',
                effectText:
                    '**АНАЛИЗ:** ФЛОРА, ТИП НЕИЗВЕСТЕН. СВЕЧЕНИЕ — РЕЗУЛЬТАТ СИМБИОЗА С МИКРООРГАНИЗМАМИ, ПОГЛОЩАЮЩИМИ ПСИ-ЭНЕРГИЮ.\n\n**ОПАСНОСТЬ:** ПРИ ПРЯМОМ КОНТАКТЕ ВЫЗЫВАЕТ ЛЁГКИЕ ГАЛЛЮЦИНАЦИИ.\n\nТы докладываешь: «На камнях мох, светится. Не трогать. Вызывает глюки. Агата, тебя касается в первую очередь».',
                nextNodeId: 'approach_rift',
            },
            {
                id: 'scan_biometrics',
                text: '[Медик] Просканировать собственный пульс и биометрию команды',
                requiredRole: 'valkyrie',
                effectText:
                    'Инстинкт врача берёт верх. Прежде чем лечить мир, нужно убедиться, что твой собственный организм в порядке.\n\nТы переключаешь сканер «Око» в режим биометрии и направляешь его на свою руку, а затем поочерёдно на спины идущих впереди товарищей.\n\n**РЕЗУЛЬТАТ:** Пульс у всех повышен, но в пределах нормы. Уровень кортизола — стресс. У Агаты — лёгкая гипоксия. У Дитриха — идеальные показатели. Холоднокровный.\n\nВнутренний голос: «Команда в норме. Пока что. Но чем ближе к Разлому — тем хуже будет».',
                nextNodeId: 'approach_rift',
            },
            // ===== ЙОХАНН — ТЕХНИК =====
            {
                id: 'scan_armor',
                text: 'Просканировать остатки бронемашины',
                requiredRole: 'vorschlag',
                effectText:
                    '**АНАЛИЗ КОРРОЗИИ:** Нано-органические кислоты. Структура металла дестабилизирована на молекулярном уровне.\n\n**СТАНДАРТНАЯ ЗАЩИТА НЕЭФФЕКТИВНА.**\n\nЙоханн докладывает: «Парни, тут броня БТР... она не прожжена, она... разложена. Как будто состарилась на тысячу лет за секунду. Наши броники против этого — картон».',
                nextNodeId: 'approach_rift',
            },
            {
                id: 'scan_gravity',
                text: 'Просканировать искажённое дерево',
                requiredRole: 'vorschlag',
                effectText:
                    '**ВНИМАНИЕ!** ОБНАРУЖЕНА ЛОКАЛЬНАЯ ГРАВИТАЦИОННАЯ АНОМАЛИЯ. СИЛА: 1.5 G. НЕСТАБИЛЬНА.\n\nЙоханн (восхищённо): «Вот это да... Оно... оно искажает пространство вокруг себя! Как чёрная дыра в миниатюре! Нужно понять, как оно это делает!»\n\nПрайс: «Эйзенхауэр, мы здесь не на экскурсии. Хватит восторгов — двигаемся».',
                nextNodeId: 'approach_rift',
            },
            // ===== ДИТРИХ — СНАЙПЕР =====
            {
                id: 'scan_tracks',
                text: 'Изучить следы на земле',
                requiredRole: 'ghost',
                effectText:
                    'Ты опускаешься на колено и изучаешь землю. Следы. Много следов.\n\nТри типа: человеческие (берцы FJR), когтистые (что-то крупное, четырёхлапое) и... борозда. Что-то волокли. Или что-то ползло.\n\nДитрих (тихо, по рации): «Следы. Группа "Эхо" прошла здесь. Их преследовали. Одного... тащили».',
                nextNodeId: 'approach_rift',
            },
            {
                id: 'scan_perimeter',
                text: 'Осмотреть периметр через прицел',
                requiredRole: 'ghost',
                effectText:
                    'Ты поднимаешь винтовку и смотришь через прицел на склон впереди. Камни... мох... тени...\n\nСтоп. Одна из теней двигается не так, как остальные. Она... ждёт.\n\nДитрих (шёпотом, по рации): «Движение. На два часа. Дистанция — сто пятьдесят метров. Что-то нас наблюдает».\n\nПрайс: «Понял. Не стрелять. Пока не стрелять».',
                nextNodeId: 'approach_rift',
            },
            // ===== АГАТА — ПОДРЫВНИК =====
            {
                id: 'kick_crystal',
                text: 'Пнуть кристалл ногой',
                requiredRole: 'shustrya',
                effectText:
                    'Ты не можешь удержаться и пинаешь один из красных кристаллов. Он разлетается на осколки, и... ничего не происходит.\n\nАгата: «Видите? Не всё, что красное, обязательно взрывается».\n\nПрайс (сухо): «Вольф. Ещё раз тронешь что-нибудь без приказа — и ты будешь идти впереди всех. Как сапёр».',
                nextNodeId: 'approach_rift',
            },
            {
                id: 'check_explosives',
                text: 'Проверить свой запас взрывчатки',
                requiredRole: 'shustrya',
                effectText:
                    'Ты быстро проверяешь свой рюкзак. Три осколочные гранаты. Две дымовые. Один брикет пластита. Детонаторы на месте. Провода — целы.\n\nАгата (про себя): «Немного. Но если использовать грамотно... хватит, чтобы устроить кому-то очень плохой день».',
                nextNodeId: 'approach_rift',
            },
            // ===== МОЛЧАНИЕ =====
            {
                id: 'no_scan',
                text: 'Не отвлекаться на сканирование',
                effectText:
                    'Ты решаешь не отвлекаться и сосредоточиться на пути. Безопасность прежде всего. Пусть сбором данных занимается Нуль — это его работа.\n\nНуль (недовольно бурчит): «Никто не сканирует. Все слепые. Данные нужны...»',
                nextNodeId: 'approach_rift',
            },
        ],
    },

    // ===== СЦЕНА 4: ПЕРЕД РАЗЛОМОМ =====
    approach_rift: {
        id: 'approach_rift',
        title: 'На пороге',
        background: '/images/Мультиплеер/сцена4разлом.png',
        description: `
Вы достигаете последнего рубежа. Разлом — прямо перед вами.

Это не просто трещина в скале. Это **рана в реальности**. Вертикальный разрез высотой в три человеческих роста, из которого сочится свет — не тёплый, не холодный, а какой-то... неправильный. Фиолетовый с зелёными прожилками. Он пульсирует, как живой.

Воздух здесь густой и вязкий. Каждый вдох даётся с усилием. В ушах — низкий гул, который ты чувствуешь не только слухом, но и всем телом. Зубы вибрируют.

**Прайс:** «Это оно. Точка невозврата. После этого порога — только вперёд».

Он оборачивается к вам, и сквозь стекло шлема ты видишь его глаза. Никакого страха. Только холодная решимость.

**Прайс:** «Последний шанс. Кто хочет сказать что-то — говорите сейчас. Там времени на слова не будет».
`,
        privateText: {
            valkyrie: 'Ты чувствуешь, как твой пульс ускоряется. Сканер показывает небольшой скачок адреналина. Это нормально. Это значит, что ты ещё жива.',
            ghost: 'Ты смотришь на Разлом через прицел. Внутри... что-то движется. Тени. Или отражения. Ты не уверен.',
            vorschlag: 'Твоя электроника начинает сбоить. Экран сканера мерцает. Показатели плывут. Это плохой знак.',
            shustrya: 'Агата смотрит на Разлом, как ребёнок смотрит на новогоднюю ёлку. В её глазах — не страх, а азарт.',
        },
        interactionType: 'individual',
        choices: [
            {
                id: 'enter_rift',
                text: 'Молча кивнуть и войти в Разлом',
                effectText:
                    'Ты не произносишь ни слова. Просто киваешь. Слова здесь ничего не изменят.\n\nПрайс смотрит на тебя: «Правильно. Действия говорят громче».\n\nОн делает шаг к Разлому. Свет окутывает его силуэт, размывая контуры. И он исчезает.\n\nТвоя очередь.',
                nextNodeId: 'rift_crossing',
            },
            {
                id: 'valkyrie_oath',
                text: '[Медик] «Я вытащу вас. Всех. Это моя работа».',
                requiredRole: 'valkyrie',
                effectText:
                    'Ева: «Я вытащу вас. Всех. Это моя работа».\n\nПрайс кивает: «Держи слово, Док. Там будет много работы».\n\nАгата хлопает тебя по плечу: «Эй, если что — сначала спасай меня. Я красивее остальных».\n\nТы не улыбаешься. Но внутри — тёплое чувство. Ты знаешь, зачем ты здесь.',
                nextNodeId: 'rift_crossing',
            },
            {
                id: 'vorschlag_data',
                text: '[Техник] «Принесу данные. Или не вернусь совсем».',
                requiredRole: 'vorschlag',
                effectText:
                    'Йоханн: «Принесу данные. Или не вернусь совсем».\n\nНуль впервые смотрит на тебя с одобрением: «Правильный приоритет. Данные важнее. Мы — расходный материал».\n\nПрайс: «Никто не расходный. Но миссия — прежде всего. Двигаемся».',
                nextNodeId: 'rift_crossing',
            },
            {
                id: 'ghost_silence',
                text: '[Снайпер] Поднять винтовку в молчаливом салюте',
                requiredRole: 'ghost',
                effectText:
                    'Дитрих молча поднимает винтовку — традиционный жест снайпера. Прощание и обещание.\n\nПрайс понимает: «Призрак готов. Остальные — за ним».\n\nТы первым шагаешь к Разлому. За спиной — шаги товарищей. Впереди — неизвестность.',
                nextNodeId: 'rift_crossing',
            },
            {
                id: 'shustrya_joke',
                text: '[Подрывник] «Если там будет дракон — я хочу взорвать его первой!»',
                requiredRole: 'shustrya',
                effectText:
                    'Агата: «Если там будет дракон — я хочу взорвать его первой!»\n\nПрайс закатывает глаза: «Вольф, я начинаю жалеть, что не оставил тебя в лагере».\n\nАгата ухмыляется: «Но вы бы соскучились, сэр».\n\nОна первой прыгает в Разлом — с восторженным воплем.',
                nextNodeId: 'rift_crossing',
            },
        ],
    },
};
